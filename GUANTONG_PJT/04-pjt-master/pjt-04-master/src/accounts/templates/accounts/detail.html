{% extends 'base.html' %}

{% block content %}
<div class="container mt-5" style="max-width: 680px;">
  <h1 class="text-center section-title">{{ request.user }}님의 관심 종목</h1>

  <!-- 종목 추가 폼 -->
  <div class="p-4 border rounded bg-light mb-4">
    <form action="{% url 'accounts:addfavorites' %}" method="POST" role="search">
      {% csrf_token %}
      
      <div class="d-flex align-items-end gap-2" style="width: 100%;">
        <div class="flex-grow-1">
          <label for="companyName" class="form-label">종목명 입력</label>
          <input 
            id="companyName" 
            type="text" 
            name="company_name" 
            placeholder="종목명을 검색하세요." 
            class="form-control"
          >
        </div>

        <div>
          <button type="submit" class="btn" style="background-color: #343a40; color: white;">
            추가
          </button>
        </div>
      </div>
    </form>
  </div>



  {% comment %} 관심 종목 리스트! {% endcomment %}
  {% for favorite in favorites %}
  <li class="list-group-item p-2">
    <div class="d-flex align-items-center gap-3">
      <form method="POST" action="{% url 'contentfetch:stock_finder' %}" id="searchForm_{{ favorite.pk }}" class="m-0">
        {% csrf_token %}
        <input type="hidden" name="company_name" value="{{ favorite.company_name }}" />
        <button type="submit" class="btn btn-link text-black p-0">
          {{ favorite.company_name }}
        </button>
      </form>

      <form action="{% url 'accounts:delete_favorite' favorite.pk %}" method="POST" class="m-0">
        {% csrf_token %}
        <input type="submit" value="삭제" class="btn btn-sm btn-dark text-white" />
      </form>
    </div>
  </li>
{% endfor %}




{% endblock %}
